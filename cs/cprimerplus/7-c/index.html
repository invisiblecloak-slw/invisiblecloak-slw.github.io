<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>第7章 C控制语句：分支和跳转 - XIU</title>
    <meta property="og:title" content="第7章 C控制语句：分支和跳转 - XIU">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
    

    
    
    
    <meta name="twitter:image" content="https://qidi.ink/images/Octopus_pills.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.14.1/styles/googlecode.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="cs">
    <header class="masthead">
      <h1 class="headimg">
    
    <a href="/"><img src="/img/headimg.png" alt="Fuhui "></a>
</h1>

<p class="tagline">欢迎</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">首页</a></li>
  
  <li><a href="/cs/cprimerplus">C Primer Plus</a></li>
  
  <li><a href="/cs/dsaa/">数据结构与算法分析-C</a></li>
  
  


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      <h1>第7章 C控制语句：分支和跳转</h1>




    
    
    <section class="post-meta">
        <span class="post-author">Xiu Di
        
            
            
             /  2021-04-30
            
        </span>
        
    </section>
    



<hr>
      </header>



<ul>
<li>智能的一个方面是：根据情况做出相应的响应。</li>
<li><strong>选择语句</strong>是开发具有<strong>智能行为程序</strong>的基础。</li>
<li><strong>C</strong>语言通过<code>if</code>、<code>if else</code>和<code>switch</code>语句以及条件运算符<code>(?:)</code>可以实现智能选择。</li>
</ul>
<h2 id="if语句">if语句</h2>
<ul>
<li><code>if</code>语句用于选择是否执行一个行为，又称为<strong>分支语句</strong>或<strong>选择语句</strong>。相当于一个交叉点。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">if</span> ( expression )
    statement
</code></pre></div><ul>
<li><code>if else</code>语句用于在两个行为之间选择。<code>if else</code>语句的通用形式是：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">if</span> ( expression )
    statement1
<span style="color:#66d9ef">else</span>
    statement2
</code></pre></div><ul>
<li><code>if</code>和<code>else</code>之间只允许有一条简单语句或复合语句。</li>
<li>整个<code>if else</code>语句被视为一条语句。</li>
<li>如果没有花括号，<code>else</code>与离它最近的<code>if</code>匹配。</li>
<li>在<code>else</code>后面适用另一个<code>if</code>语句形成<code>else if</code>，可以构造多选一的结构。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">if</span> ( expression1 )
    statement1
<span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> ( expression2 )
    statement2
<span style="color:#66d9ef">else</span>
    statement3
</code></pre></div><ul>
<li>除非最近的<code>if</code>被花括号括起来。</li>
<li><code>if</code>和<code>if else</code>语句使用测试条件判断执行哪些语句。测试通常涉及关系表达式、逻辑表达式。</li>
</ul>
<h2 id="getchar和putchar"><code>getchar()</code>和<code>putchar()</code></h2>
<ul>
<li><code>getchar()</code>和<code>putchar()</code>函数定义在头文件<code>stdio.h</code>中。</li>
<li><code>getchar()</code>和<code>putchar()</code>是预处理宏，不是真正的函数。</li>
<li><code>getchar()</code>函数不带任何参数，从输入队列中返回下一个字符。
<ul>
<li><code>ch = getchar()</code>等效于<code>scanf(&quot;%c&quot;, &amp;ch)</code>。</li>
</ul>
</li>
<li><code>putchar()</code>函数打印它的参数。
<ul>
<li><code>putchar(ch)</code>等效于<code>printf(&quot;%c&quot;, ch)</code>。</li>
</ul>
</li>
<li><code>getchar()</code>和<code>putchar()</code>函数只处理字符，它们比通用的<code>scanf()</code>和<code>printf()</code>函数更快。</li>
<li><code>getchar()</code>和<code>putchar()</code>函数不需要转换说明。</li>
<li><code>putchar()</code>函数接受<strong>int</strong>类型参数，该函数只根据最后一个字节确定显示哪个字符。</li>
</ul>
<h2 id="ctypeh系列的字符函数">ctype.h系列的字符函数</h2>
<ul>
<li><strong>C</strong>有一个专门处理字符的函数系列。<code>ctype.h</code>头文件包含了这些函数的原型。
<ul>
<li>这些函数接受一个字符作为参数。</li>
<li>如果这个字符属于某特殊类别，就返回一个非零值(真)，否则返回假。</li>
</ul>
</li>
<li><code>ctype.h</code>系列的字符函数为创建以分类字符为基础的测试表达式提供了便捷的工具。</li>
</ul>
<h2 id="逻辑运算符">逻辑运算符</h2>
<ul>
<li><strong>C</strong>有三种逻辑运算符：<code>&amp;&amp;</code>：逻辑与、<code>||</code>：逻辑或、<code>!</code>：逻辑非。</li>
<li>若包含<code>iso646.h</code>头文件，则可以用<code>and</code>代替<code>&amp;&amp;</code>、<code>or</code>代替<code>||</code>、<code>not</code>代替<code>!</code>。</li>
<li><strong>C</strong>保证<strong>逻辑表达式</strong>的求值顺序是<strong>从左往右</strong>。
<ul>
<li><strong>C</strong>保证一旦发现某个元素让整个表达式值无效，就会立即停止求值。
<ul>
<li><code>while ((c = getchar()) != ' ' &amp;&amp; c != '\n')</code></li>
<li>上述代码读取字符直至第一个空格或换行符。</li>
<li>第一个子表达式把读取的值赋给<code>c</code>，后面的子表达式会用到<code>c</code>的值。</li>
</ul>
</li>
<li><code>&amp;&amp;</code>和<code>||</code>都是序列点。程序在从一个运算对象执行到下一个运算对象之前，所有的副作用都会生效。
<ul>
<li>`while ( x++ &lt; 10 &amp;&amp; x + y &lt; 20 )</li>
<li><code>&amp;&amp;</code>是一个序列点，保证了在对<code>&amp;&amp;</code>右侧的表达式求值之前，已经递增了<code>x</code>。`</li>
</ul>
</li>
</ul>
</li>
<li><code>&amp;&amp;</code>运算符可用于测试范围。如<code>range &gt;= 90 &amp;&amp; range &lt;= 100</code>。
<ul>
<li>数学上的写法<code>if (90 &lt;= range &lt;= 100)</code>存在语义错误，而非语法错误。编译器不会捕获这种问题。
<ul>
<li>由于<code>&lt;=</code>的运算符求值顺序是从左往右，所以编译器把测试表达式解释为<code>(90 &lt;= range) &lt;= 100</code>。</li>
<li>子表达式<code>90 &lt;= range</code>的值为1或0，因此<code>90 &lt;= range &lt;= 100</code>整个表达式恒为真。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="条件运算符-">条件运算符 ?:</h2>
<ul>
<li><strong>C</strong>提供条件表达式作为表达式<code>if else</code>语句的一种简洁方式。</li>
<li>条件运算符是<strong>C</strong>语言中唯一的三元运算符。</li>
<li>条件表达式的通用形式为<code>expression1 ? expression2 : expression3</code>
<ul>
<li>如果<code>expression1</code>为真，则整个条件表达式的值与<code>expression2</code>的值相同。</li>
<li>如果<code>expression1</code>为假，则整个条件表达式的值愈<code>expression3</code>的值相同。</li>
</ul>
</li>
<li>条件运算符的<code>expression2</code>和<code>expression3</code>可以是字符串。</li>
</ul>
<h2 id="continue和bresk">continue和bresk</h2>
<h3 id="continue语句">continue语句</h3>
<ul>
<li>三种循环都可以使用<code>continue</code>语句。</li>
<li>执行到<code>continue</code>语句时，会跳过本次迭代的剩余部分，并开始下一轮迭代。</li>
<li>如果<code>continue</code>语句在嵌套循环内，则只影响包含<code>continue</code>语句的内层循环。</li>
<li>对于<code>for</code>循环，执行<code>continue</code>后的下一个行为是对更新表达式求值，然后是对循环测试表达式求值。</li>
<li>如果<code>switch</code>语句在一个循环中，<code>continue</code>便可作为<code>switch</code>语句的一部分。
<ul>
<li>此时<code>continue</code>让程序跳出循环的剩余部分，包括<code>switch</code>语句的其他部分。</li>
</ul>
</li>
</ul>
<h3 id="break语句">break语句</h3>
<ul>
<li>程序执行到循环中的<code>break</code>语句时，会终止包含它的循环，并继续执行下一阶段。</li>
<li>如果<code>break</code>语句位于嵌套循环内，则只会影响包含它的当前循环。若要跳出外层循环还需要一个<code>break</code>。</li>
<li>对于<code>for</code>循环，执行<code>break</code>后会直接执行循环后面的第一条语句，跳过更新部分。</li>
<li>所有的循环和<code>switch</code>语句都可以使用<code>break</code>语句，它使程序跳出当前循环或<code>switch</code>语句的剩余部分，并继续执行跟在循环或<code>switch</code>后面的语句。</li>
</ul>
<h2 id="switch语句">switch语句</h2>
<ul>
<li>当程序需要在多项中进行选择时，使用<code>switch</code>语句更加方便。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">switch</span> ( expression  )
{
    <span style="color:#66d9ef">case</span> label1 : statement1 <span style="color:#75715e">// 使用break跳出switch
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">case</span> label2 : statement2
    <span style="color:#66d9ef">default</span> <span style="color:#f92672">:</span> statement3
}
</code></pre></div><ul>
<li>程序根据<code>expression</code>的值跳转到相应的<code>case</code>标签处。</li>
<li>执行剩下的所有语句，除非执行到<code>break</code>语句重定向。</li>
<li><code>expression</code>和<code>case</code>标签都需要是整数值（包括<code>char</code>类型）。
<ul>
<li>标签必须是常量或完全由常量组成的表达式。</li>
</ul>
</li>
<li>如果没有<code>case</code>标签与<code>expression</code>的值匹配，控制跳转到标有<code>default</code>的语句。
<ul>
<li>否则跳转到紧跟在<code>switch</code>之后的语句。（<code>default</code>可选）</li>
</ul>
</li>
<li>如果是根据浮点类型的变量或表达式选择，就无法使用<code>switch</code>。</li>
<li>如果根据变量在某范围内决定程序流的去向，使用<code>switch</code>比较麻烦。</li>
</ul>
<h2 id="goto语句">goto语句</h2>
<ul>
<li><code>goto</code>语句有两部分：<code>goto</code>和标签名。
<ul>
<li>标签名遵循变量命名规则。</li>
<li><strong>C</strong>允许在标签中使用描述性的单词而不是数字，提高了<strong>C</strong>语言中<code>goto</code>语句的易用性。</li>
</ul>
</li>
<li><code>goto</code>语句用法形如<code>goto part2</code>。
<ul>
<li>函数必须包含另一条标为<code>part2</code>的语句，该语句以标签名后紧跟一个冒号开始。</li>
<li><code>part2: printf(&quot;Refined analysis:\n&quot;);</code></li>
<li>冒号用于分隔标签和标签语句。</li>
</ul>
</li>
<li><code>break</code>语句只能跳出当前循环，<code>goto</code>可以在出现问题时便利地从一组嵌套循环中跳出。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">while</span> (funct <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>)
{
    <span style="color:#66d9ef">for</span> ( i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">100</span>; i<span style="color:#f92672">++</span> )
    {
        <span style="color:#66d9ef">for</span> ( j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; j <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">50</span>; j<span style="color:#f92672">++</span> )
        {
            statement
            <span style="color:#66d9ef">if</span> (Problem)
                <span style="color:#66d9ef">goto</span> help;
            statement
        }
        statement
    }
    statement
}
statement
help: statement
</code></pre></div><ul>
<li><strong>Kernighan</strong>和<strong>Ritchie</strong>提到<code>goto</code>语句<strong>易被滥用</strong>，建议<strong>谨慎使用或根本不用</strong>。</li>
</ul>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/cs/cprimerplus/6-c/">第6章 C控制语句：循环</a></span>
  <span class="nav-next"></span>
</nav>





<script src="//yihui.name/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.14.1/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.14.1/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.14.1/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.14.1/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">© <a href="https://qidi.ink">Xiu Di</a> 2021 | <a href="https://github.com/invisiblecloak-slw">Github</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

